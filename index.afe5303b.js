function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},s={},n=t.parcelRequirecf20;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in s){var t=s[e];delete s[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){s[e]=t},t.parcelRequirecf20=n),n("aWIP7"),n("bTcpz"),n("gZ6M0"),n("74Aiq"),n("it0VB");var a=n("7Y9D8"),l=n("aWIP7"),i=(a=n("7Y9D8"),l=n("aWIP7"),n("bTcpz")),r=n("kw15n"),c=n("50Kfe");const d=document.querySelector(".main__title-js"),u=document.querySelector(".main__list-js");let g=window.innerWidth,_=0,m=0,f=0;const p=new(0,r.Spiner);window.addEventListener("resize",e(c)((function(e){const t=e.target.outerWidth;(t>767&&g<768||t>1439&&g<1440||t<1440&&g>1439||t<768&&g>767)&&location.reload()}),50));const y=e=>T(e).map((e=>`\n      <li class='category-books__item'>\n       <a href="/" class='category-books__link'>\n        <img\n          class='category-books__img'\n          src='${e.book_image}'\n          alt='book'\n          data-id="${e._id}"\n         loading="lazy"\n        />\n        <div class='category-books__wrapper'>\n        <p class='category-books__text'>quick view</p>\n        </div>\n        </a>\n        <h3 class='category-books__name' >${v(e.title,17)}</h3>\n        <p class='category-books__author'>${v(e.author,29)}</p>\n      </li>\n    `)).join("");async function h(){try{p.show();const t=await l.fetchBooks.getBestSellers();0!==t.length||e(a).Notify.failure("Sorry, there was an error on the server. Please try again."),u.innerHTML=(e=>e.map((e=>`\n           <li class='all-categories__item'>\n           <p class='category-books__title'>${e.list_name}</p>\n            <ul class='category-books__list-js card-set'>\n           ${y(e.books)}\n           </ul>\n           <button class="load-more-js" type="button" data-category="${e.list_name}">see more</button>\n           </li>\n      `)).join(""))(t);const o=document.querySelectorAll(".load-more-js"),s=document.querySelectorAll(".category-books__item");j(s),S(o),p.hide()}catch(e){console.log(e),p.hide()}}const b=()=>{d.innerHTML=' Best Sellers <span class="main__title--color-purple">Books</span>',h()},k=e=>{e.preventDefault(),m=e.target.dataset.id,"IMG"===e.target.nodeName&&(0,i.handleModalWindow)(m)},w=()=>{document.documentElement.scrollTop=g<768?736:g>=768&&g<1440?650:0},L=e=>{f=e.target.dataset.category,q(f),W(f),w()},v=(e,t)=>e.length>t?`${e.slice(0,t)}...`:e,j=e=>{e.forEach((e=>{e.addEventListener("click",k)}))},S=e=>{e.forEach((e=>{e.addEventListener("click",L)}))},q=e=>{const t=document.querySelector(".categories-list-js").children;for(let o=0;o<t.length;o+=1){const s=t[o];s.firstElementChild.classList.remove("selected-categories"),s.textContent.trim()===e.trim()&&s.firstElementChild.classList.add("selected-categories")}},T=e=>(1===_?e.splice(1,4):3===_&&e.splice(3,2),e);_=g<768?1:g>=768&&g<1440?3:5,b();r=n("kw15n");const E=document.querySelector(".categories-list-js"),M=document.querySelector(".main__list-js"),$=document.querySelector(".main__title-js"),B=document.querySelector(".all-categories-btn");let x="";B.classList.add("selected-categories");const C=new(0,r.Spiner);(async()=>{try{const e=(await l.fetchBooks.getCategoriesList()).map((e=>`<li class= 'categories-list__item '> <button class= 'categories-list__button'>${e.list_name}</button> </li>`)).join("");E.insertAdjacentHTML("beforeend",e)}catch(e){console.log(e)}})();const W=async e=>{C.show();const t=await l.fetchBooks.getBooksByCategory(e),o=y(t),s=e.split(" "),n=s.slice(0,s.length-1).join(" "),a=s.slice(s.length-1).join();$.innerHTML=`${n}<span class="main__title--color-purple"> ${a}</span>`,M.innerHTML=o,M.classList.add("card-set");const i=document.querySelectorAll(".category-books__item");j(i),B.classList.remove("selected-categories"),C.hide()};E.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if(N(),e.target===B)return B.classList.add("selected-categories"),void b();x=e.target.textContent,W(x),e.target.classList.add("selected-categories"),w()}));const N=()=>{for(let e=0;e<E.children.length;e+=1){E.children[e].firstElementChild.classList.remove("selected-categories")}};n("dTazW"),n("bUb57"),n("bMZn5");
//# sourceMappingURL=index.afe5303b.js.map
